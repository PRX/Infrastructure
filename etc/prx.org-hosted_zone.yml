AWSTemplateFormatVersion: "2010-09-09"
Description: tktk
Parameters:
  Domain:
    Default: prx.org.
    Description: The domain name and hosted zone
    Type: String
Resources:
  HostedZone:
    Type: "AWS::Route53::HostedZone"
    Properties:
      HostedZoneConfig:
        Comment: prx.org
      # HostedZoneTags:
      #   - Key: Project
      #     Value: radiotopia.fm
      Name: !Ref Domain
  Text:
    DependsOn: HostedZone
    Type: "AWS::Route53::RecordSetGroup"
    Properties:
      # Route53 expects TXT record values to be enclosed in double quotes, so in
      # the YAML they need to be double-quoted.
      # Each domain name should only have a single text record. Add multiple
      # resource records if necessary.
      # All SPF records need to go into a single resource record.
      Comment: TXT Records
      HostedZoneName: !Ref Domain
      RecordSets:
        - ResourceRecords:
            - '"status-page-domain-verification=6n18jv5h9b5d"'
            - '"google-site-verification=j5qsGbnU-E37T9lsaAYL1967H0ej6iZAeX_vEWcOA-w"'
            - '"v=spf1 include:spf.mandrillapp.com include:mail.zendesk.com include:_spf.google.com include:amazonses.com include:stspg-customer.com -all"'
          TTL: "300"
          Type: TXT
          Name: !Ref Domain
        - ResourceRecords:
            - '"E5Armcve3+nXovpZPjTjUOkraFpdG0dcJjxOdScmrMk="'
          TTL: "300"
          Type: TXT
          Name: !Sub _amazonses.${Domain}
        - ResourceRecords:
            - '"v=DKIM1; k=rsa; p=MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCYbt8bCjEvkdbTiYthVqEtFVySGUqThs+Agsbz7nU2BybHIqo9DCD7xMy9wVfaQOr0uPiKkahvpRVZAFgbYK4o2T7q4tibwb0UoD2LD0X6y+aKN8KWh07vyr17/fq6fiYTeeCIKyz8bufJcEZ1ZatLhlSp5gvUs2CUNWJjwSxh3wIDAQAB"'
          TTL: "300"
          Type: TXT
          Name: !Sub google._domainkey.${Domain}
  Highwinds:
    DependsOn: HostedZone
    Type: "AWS::Route53::RecordSetGroup"
    Properties:
      Comment: CNAME records for Highwinds sites
      HostedZoneName: !Ref Domain
      RecordSets:
        - ResourceRecords:
            - cds.b3j2v5n8.hwcdn.net.
          TTL: "300"
          Type: CNAME
          Name: !Sub cdn-radiotopia.${Domain}
        - ResourceRecords:
            - cds.m7x6t6c7.hwcdn.net.
          TTL: "300"
          Type: CNAME
          Name: !Sub cdn-bugle.${Domain}
        - ResourceRecords:
            - cds.d9n6p3k9.hwcdn.net.
          TTL: "300"
          Type: CNAME
          Name: !Sub cdn-99percentinvisible.${Domain}
        - ResourceRecords:
            - cds.v9m6r2v6.hwcdn.net.
          TTL: "300"
          Type: CNAME
          Name: !Sub cdn-allusionist.${Domain}
        - ResourceRecords:
            - cds.d7n9t9b9.hwcdn.net.
          TTL: "300"
          Type: CNAME
          Name: !Sub cdn-blankonblank.${Domain}
        - ResourceRecords:
            - cds.x9t6f6d6.hwcdn.net.
          TTL: "300"
          Type: CNAME
          Name: !Sub cdn-esquire.${Domain}
        - ResourceRecords:
            - ds.m9w6g3q5.hwcdn.net.
          TTL: "300"
          Type: CNAME
          Name: !Sub cdn-found.${Domain}
        - ResourceRecords:
            - cds.b8z3t3h4.hwcdn.net.
          TTL: "300"
          Type: CNAME
          Name: !Sub cdn-fugitivewaves.${Domain}
        - ResourceRecords:
            - cds.n3n3w5u4.hwcdn.net.
          TTL: "300"
          Type: CNAME
          Name: !Sub cdn-heart.${Domain}
        - ResourceRecords:
            - cds.m6i2n6w5.hwcdn.net.
          TTL: "300"
          Type: CNAME
          Name: !Sub cdn-howsound.${Domain}
        - ResourceRecords:
            - cds.a7h7m5v4.hwcdn.net.
          TTL: "300"
          Type: CNAME
          Name: !Sub cdn-loveandradio.${Domain}
        - ResourceRecords:
            - cds.m6u9z2i5.hwcdn.net.
          TTL: "300"
          Type: CNAME
          Name: !Sub cdn-mortified.${Domain}
        - ResourceRecords:
            - cds.r2x4y8c2.hwcdn.net.
          TTL: "300"
          Type: CNAME
          Name: !Sub cdn-radiodiaries.${Domain}
        - ResourceRecords:
            - cds.k6r6v2e5.hwcdn.net.
          TTL: "300"
          Type: CNAME
          Name: !Sub cdn-reveal.${Domain}
        - ResourceRecords:
            - cds.x8b5s8y2.hwcdn.net.
          TTL: "300"
          Type: CNAME
          Name: !Sub cdn-saltcast.${Domain}
        - ResourceRecords:
            - cds.g4e7f9c7.hwcdn.net.
          TTL: "300"
          Type: CNAME
          Name: !Sub cdn-strangers.${Domain}
        - ResourceRecords:
            - cds.v2e8q3c4.hwcdn.net.
          TTL: "300"
          Type: CNAME
          Name: !Sub cdn-toe.${Domain}
        - ResourceRecords:
            - cds.d2q9e4a4.hwcdn.net.
          TTL: "300"
          Type: CNAME
          Name: !Sub cdn-transistor.${Domain}
        - ResourceRecords:
            - cds.c8s5s9v4.hwcdn.net.
          TTL: "300"
          Type: CNAME
          Name: !Sub cdn-ffh.${Domain}
        - ResourceRecords:
            - cds.y7y4m6q5.hwcdn.net.
          TTL: "300"
          Type: CNAME
          Name: !Sub cdn-hermoney.${Domain}
        - ResourceRecords:
            - cds.b7i3c5p4.hwcdn.net.
          TTL: "300"
          Type: CNAME
          Name: !Sub cdn-htba.${Domain}
        - ResourceRecords:
            - cds.q2i7x7y4.hwcdn.net.
          TTL: "300"
          Type: CNAME
          Name: !Sub cdn-israel.${Domain}
        - ResourceRecords:
            - cds.a7u4w6s6.hwcdn.net.
          TTL: "300"
          Type: CNAME
          Name: !Sub cdn-millennial.${Domain}
        - ResourceRecords:
            - cds.x6t5b7p4.hwcdn.net.
          TTL: "300"
          Type: CNAME
          Name: !Sub cdn-orbital.${Domain}
        - ResourceRecords:
            - cds.n6x9x5k6.hwcdn.net.
          TTL: "300"
          Type: CNAME
          Name: !Sub cdn-outside.${Domain}
        - ResourceRecords:
            - cds.g4e7f9c7.hwcdn.net.
          TTL: "300"
          Type: CNAME
          Name: !Sub cdn.strangers.${Domain}
        - ResourceRecords:
            - cds.n3n3w5u4.hwcdn.net.
          TTL: "300"
          Type: CNAME
          Name: !Sub cdn.heart.${Domain}
        - ResourceRecords:
            - cds.m6u9z2i5.hwcdn.net.
          TTL: "300"
          Type: CNAME
          Name: !Sub cdn.mortified.${Domain}
        - ResourceRecords:
            - cds.d2q9e4a4.hwcdn.net.
          TTL: "300"
          Type: CNAME
          Name: !Sub cdn.transistor.${Domain}
        - ResourceRecords:
            - cds.v9m6r2v6.hwcdn.net.
          TTL: "300"
          Type: CNAME
          Name: !Sub cdn.allusionist.${Domain}
        - ResourceRecords:
            - cds.a7h7m5v4.hwcdn.net.
          TTL: "300"
          Type: CNAME
          Name: !Sub cdn.loveandradio.${Domain}
        - ResourceRecords:
            - cds.b7i3c5p4.hwcdn.net.
          TTL: "300"
          Type: CNAME
          Name: !Sub cdn.htba.${Domain}
        - ResourceRecords:
            - cds.x9t6f6d6.hwcdn.net.
          TTL: "300"
          Type: CNAME
          Name: !Sub cdn.esquire.${Domain}
        - ResourceRecords:
            - cds.q2i7x7y4.hwcdn.net.
          TTL: "300"
          Type: CNAME
          Name: !Sub cdn.israel.${Domain}
        - ResourceRecords:
            - cds.x6t5b7p4.hwcdn.net.
          TTL: "300"
          Type: CNAME
          Name: !Sub cdn.orbital.${Domain}
        - ResourceRecords:
            - cds.n6x9x5k6.hwcdn.net.
          TTL: "300"
          Type: CNAME
          Name: !Sub cdn.outside.${Domain}
        - ResourceRecords:
            - cds.y7y4m6q5.hwcdn.net.
          TTL: "300"
          Type: CNAME
          Name: !Sub cdn.hermoney.${Domain}
        - ResourceRecords:
            - cds.m7x6t6c7.hwcdn.net.
          TTL: "300"
          Type: CNAME
          Name: !Sub cdn.bugle.${Domain}
        - ResourceRecords:
            - cds.a7u4w6s6.hwcdn.net.
          TTL: "300"
          Type: CNAME
          Name: !Sub cdn.millennial.${Domain}
        - ResourceRecords:
            - cds.i7e6a2a4.hwcdn.net.
          TTL: "300"
          Type: CNAME
          Name: !Sub cdn.cpk.${Domain}
        - ResourceRecords:
            - cds.c8s5s9v4.hwcdn.net.
          TTL: "300"
          Type: CNAME
          Name: !Sub cdn.ffh.${Domain}
        - ResourceRecords:
            - cds.v9x4v3q6.hwcdn.net.
          TTL: "300"
          Type: CNAME
          Name: !Sub cdn.offshore.${Domain}
        - ResourceRecords:
            - cds.v9x4v3q6.hwcdn.net.
          TTL: "300"
          Type: CNAME
          Name: !Sub cdn-offshore.${Domain}
        - ResourceRecords:
            - cds.i7e6a2a4.hwcdn.net.
          TTL: "300"
          Type: CNAME
          Name: !Sub cdn-cpk.${Domain}
        - ResourceRecords:
            - cds.r2x4y8c2.hwcdn.net.
          TTL: "300"
          Type: CNAME
          Name: !Sub cdn.radiodiaries.${Domain}
        - ResourceRecords:
            - cds.b8z3t3h4.hwcdn.net.
          TTL: "300"
          Type: CNAME
          Name: !Sub cdn.fugitivewaves.${Domain}
        - ResourceRecords:
            - cds.b3j2v5n8.hwcdn.net.
          TTL: "300"
          Type: CNAME
          Name: !Sub cdn.radiotopia.${Domain}
        - ResourceRecords:
            - cds.k6r6v2e5.hwcdn.net.
          TTL: "300"
          Type: CNAME
          Name: !Sub cdn.reveal.${Domain}
        - ResourceRecords:
            - cds.d9n6p3k9.hwcdn.net.
          TTL: "300"
          Type: CNAME
          Name: !Sub cdn.99percentinvisible.${Domain}
        - ResourceRecords:
            - cds.v2e8q3c4.hwcdn.net.
          TTL: "300"
          Type: CNAME
          Name: !Sub cdn.toe.${Domain}
        - ResourceRecords:
            - cds.t2h2z5k6.hwcdn.net.
          TTL: "300"
          Type: CNAME
          Name: !Sub cdn.themoth.${Domain}
        - ResourceRecords:
            - cds.x8b5s8y2.hwcdn.net.
          TTL: "300"
          Type: CNAME
          Name: !Sub cdn.saltcast.${Domain}
  ProductionApps:
    DependsOn: HostedZone
    Type: "AWS::Route53::RecordSetGroup"
    Properties:
      Comment: Production apps public domains
      HostedZoneName: !Ref Domain
      RecordSets:
        - ResourceRecords:
            - backsaw.prx.tech.
          TTL: "300"
          Type: CNAME
          Name: !Sub backsaw.${Domain}
        - ResourceRecords:
            - crier.prx.tech.
          TTL: "300"
          Type: CNAME
          Name: !Sub crier.${Domain}
        - ResourceRecords:
            - play.prx.tech.
          TTL: "300"
          Type: CNAME
          Name: !Sub play.${Domain}
        - ResourceRecords:
            - publish.prx.tech.
          TTL: "300"
          Type: CNAME
          Name: !Sub publish.${Domain}
        - ResourceRecords:
            - feeder.prx.tech.
          TTL: "300"
          Type: CNAME
          Name: !Sub feeder.${Domain}
  Contegix:
    DependsOn: HostedZone
    Type: "AWS::Route53::RecordSetGroup"
    Properties:
      Comment: Contegix servers
      HostedZoneName: !Ref Domain
      RecordSets:
        - ResourceRecords:
            - prx01.managed.contegix.com.
          TTL: "300"
          Type: CNAME
          Name: !Sub prx01.${Domain}
        - ResourceRecords:
            - prx04.managed.contegix.com.
          TTL: "300"
          Type: CNAME
          Name: !Sub prx04.${Domain}
  Legacy:
    DependsOn: HostedZone
    Type: "AWS::Route53::RecordSetGroup"
    Properties:
      Comment: Various legacy resources
      HostedZoneName: !Ref Domain
      RecordSets:
        - Type: A
          Name: !Sub assets1.${Domain}
          AliasTarget:
            DNSName: d11pcyef3meeu9.cloudfront.net
            HostedZoneId: Z2FDTNDATAQYW2
  Unbounce:
    DependsOn: HostedZone
    Type: "AWS::Route53::RecordSetGroup"
    Properties:
      Comment: Unbounce
      HostedZoneName: !Ref Domain
      RecordSets:
        - ResourceRecords:
            - unbouncepages.com.
          TTL: "300"
          Type: CNAME
          Name: !Sub try.${Domain}
  Feedburner:
    DependsOn: HostedZone
    Type: "AWS::Route53::RecordSetGroup"
    Properties:
      Comment: Feedburner
      HostedZoneName: !Ref Domain
      RecordSets:
        - ResourceRecords:
            - io25k.feedproxy.ghs.google.com.
          TTL: "300"
          Type: CNAME
          Name: !Sub feeds.${Domain}
  GitHub:
    DependsOn: HostedZone
    Type: "AWS::Route53::RecordSetGroup"
    Properties:
      Comment: GitHub
      HostedZoneName: !Ref Domain
      RecordSets:
        - ResourceRecords:
            - prx.github.io.
          TTL: "300"
          Type: CNAME
          Name: !Sub labs.${Domain}
  Bitly:
    DependsOn: HostedZone
    Type: "AWS::Route53::RecordSetGroup"
    Properties:
      Comment: Bitly
      HostedZoneName: !Ref Domain
      RecordSets:
        - ResourceRecords:
            - cname.bitly.com.
          TTL: "300"
          Type: CNAME
          Name: !Sub on.${Domain}
  AmazonSes:
    DependsOn: HostedZone
    Type: "AWS::Route53::RecordSetGroup"
    Properties:
      Comment: SES DKIM
      HostedZoneName: !Ref Domain
      RecordSets:
        - ResourceRecords:
            - gzyw7nc2rjfy5u6qplqkbbfuv4tdg5mc.dkim.amazonses.com.
          TTL: "300"
          Type: CNAME
          Name: !Sub gzyw7nc2rjfy5u6qplqkbbfuv4tdg5mc._domainkey.${Domain}
        - ResourceRecords:
            - yqwoyh6wt54oqnyelxkn5hdaxkk52kv6.dkim.amazonses.com.
          TTL: "300"
          Type: CNAME
          Name: !Sub yqwoyh6wt54oqnyelxkn5hdaxkk52kv6._domainkey.${Domain}
        - ResourceRecords:
            - dqoamfgwjnqyjzoe2rrvwkluoh7ee46v.dkim.amazonses.com.
          TTL: "300"
          Type: CNAME
          Name: !Sub dqoamfgwjnqyjzoe2rrvwkluoh7ee46v._domainkey.${Domain}
  StagePages:
    DependsOn: HostedZone
    Type: "AWS::Route53::RecordSetGroup"
    Properties:
      Comment: Unbounce
      HostedZoneName: !Ref Domain
      RecordSets:
        - ResourceRecords:
            - zlzvfpy9x7fy.stspg-customer.com.
          TTL: "300"
          Type: CNAME
          Name: !Sub status.${Domain}
  ZenDesk:
    DependsOn: HostedZone
    Type: "AWS::Route53::RecordSetGroup"
    Properties:
      Comment: ZenDesk
      HostedZoneName: !Ref Domain
      RecordSets:
        - ResourceRecords:
            - unbouncepages.com.
          TTL: "300"
          Type: CNAME
          Name: !Sub help.${Domain}
  Squarespace:
    DependsOn: HostedZone
    Type: "AWS::Route53::RecordSetGroup"
    Properties:
      Comment: Squarespace
      HostedZoneName: !Ref Domain
      RecordSets:
        - ResourceRecords:
            - verify.squarespace.com.
          TTL: "300"
          Type: CNAME
          Name: !Sub tydshd7bc7mddya37xk3.${Domain}
        - ResourceRecords:
            - ext-cust.squarespace.com.
          TTL: "300"
          Type: CNAME
          Name: !Sub catapult.${Domain}
  GSuite:
    DependsOn: HostedZone
    Type: "AWS::Route53::RecordSetGroup"
    Properties:
      Comment: G Suite
      HostedZoneName: !Ref Domain
      RecordSets:
        - ResourceRecords:
            - ghs.googlehosted.com.
          TTL: "300"
          Type: CNAME
          Name: !Sub calendar.${Domain}
        - ResourceRecords:
            - ghs.googlehosted.com.
          TTL: "300"
          Type: CNAME
          Name: !Sub mail.${Domain}
        - ResourceRecords:
            - "1 ASPMX.L.GOOGLE.COM."
            - "5 ALT1.ASPMX.L.GOOGLE.COM."
            - "5 ALT2.ASPMX.L.GOOGLE.COM."
            - "10 ASPMX2.GOOGLEMAIL.COM."
            - "10 ASPMX3.GOOGLEMAIL.COM."
          TTL: "300"
          Type: MX
          Name: !Ref Domain
