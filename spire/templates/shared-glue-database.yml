# stacks/shared-glue-database.yml
AWSTemplateFormatVersion: "2010-09-09"

Description: >-
  Creates an AWS Glue database that can be used throughout the stack to, for
  example, create Glue tables for logs generated by various services.

Parameters:
  EnvironmentType: { Type: String }
  RootStackName: { Type: String }
  NestedChangeSetScrubbingResourcesState: { Type: String }

Conditions:
  EnableNestedChangeSetScrubbingResources: !Equals [!Ref NestedChangeSetScrubbingResourcesState, Enabled]

Resources:
  NestedChangeSetScrubber: { Type: AWS::SNS::Topic, Condition: EnableNestedChangeSetScrubbingResources }

  SharedGlueDatabase:
    Type: AWS::Glue::Database
    Properties:
      CatalogId: !Ref AWS::AccountId
      DatabaseInput:
        Description: !Sub >-
          Shared database for ${EnvironmentType} ${RootStackName} stack
        Name: !Ref RootStackName

Outputs:
  SharedGlueDatabaseName:
    Value: !Ref SharedGlueDatabase
