# stacks/shared-vpc/gateway-endpoints.yml
AWSTemplateFormatVersion: "2010-09-09"

Description: Gateway VPC endpoints

Parameters:
  VpcId:
    Type: AWS::EC2::VPC::Id
  PublicRouteTableId:
    Type: String
  PrivateRouteTableId:
    Type: String

Resources:
  S3Endpoint:
    Type: AWS::EC2::VPCEndpoint
    Properties:
      RouteTableIds:
        - !Ref PublicRouteTableId
        - !Ref PrivateRouteTableId
      ServiceName: !Sub com.amazonaws.${AWS::Region}.s3
      VpcEndpointType: Gateway
      VpcId: !Ref VpcId
